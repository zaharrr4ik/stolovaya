{% extends "base.html" %}

{% block title %}Меню для повара - Stolovaia{% endblock %}

{% block content %}
<div class="menu-container">
    <h1 class="menu-title">Меню столовой на неделю</h1>
    
    <!-- Статистика -->
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin: 30px 0;">
        <div style="border: 1px solid #dee2e6; padding: 15px; border-radius: 5px; background-color: #f8f9fa;">
            <h3 style="margin-top: 0; color: #495057;">Статистика на сегодня ({{ today_date }})</h3>
            <p><strong>Завтраков выдано:</strong> {{ today_stats.get('breakfast', 0) }}</p>
            <p><strong>Обедов выдано:</strong> {{ today_stats.get('lunch', 0) }}</p>
            <p><strong>Всего:</strong> {{ today_stats.get('breakfast', 0) + today_stats.get('lunch', 0) }}</p>
        </div>

        <div style="border: 1px solid #dee2e6; padding: 15px; border-radius: 5px; background-color: #f8f9fa;">
            <h3 style="margin-top: 0; color: #495057;">Заказы на завтра ({{ tomorrow_date }})</h3>
            <p><strong>Завтраков заказано:</strong> {{ tomorrow_orders.get('breakfast', 0) }}</p>
            <p><strong>Обедов заказано:</strong> {{ tomorrow_orders.get('lunch', 0) }}</p>
            <p><strong>Всего:</strong> {{ tomorrow_orders.get('breakfast', 0) + tomorrow_orders.get('lunch', 0) }}</p>
        </div>
    </div>

    <!-- Таблица меню с датами -->
    <table class="menu-table">
        <thead>
            <tr>
                <th class="empty-cell"></th>
                {% for day in table_data %}
                <th>
                    <div style="font-weight: bold; margin-bottom: 5px;">{{ day.day_name }}</div>
                    <div style="font-size: 14px; color: #666;">{{ day.date }}</div>
                    {% if day.is_today %}
                    <div style="color: #28a745; font-size: 12px; margin-top: 5px;">(Сегодня)</div>
                    {% elif day.is_tomorrow %}
                    <div style="color: #17a2b8; font-size: 12px; margin-top: 5px;">(Завтра)</div>
                    {% endif %}
                </th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="meal-time">Завтрак</td>
                {% for day in table_data %}
                <td class="meal-item">
                    <div class="meal-content">
                        <div class="meal-text">
                            <strong style="font-size: 16px;">{{ day.breakfast_dish.name }}</strong><br>
                            <small style="font-size: 14px; color: #666;">{{ day.breakfast_dish.description }}</small>
                        </div>
                        {% if day.is_tomorrow %}
                        <div class="meal-status" style="margin-top: 10px; padding: 5px; background-color: #e9ecef; border-radius: 3px;">
                            <span style="font-size: 12px;">Заказано: {{ tomorrow_orders.get('breakfast', 0) }} порций</span>
                        </div>
                        {% endif %}
                    </div>
                </td>
                {% endfor %}
            </tr>
            <tr>
                <td class="meal-time">Обед</td>
                {% for day in table_data %}
                <td class="meal-item">
                    <div class="meal-content">
                        <div class="meal-text">
                            <strong style="font-size: 16px;">{{ day.lunch_dish.name }}</strong><br>
                            <small style="font-size: 14px; color: #666;">{{ day.lunch_dish.description }}</small>
                        </div>
                        {% if day.is_tomorrow %}
                        <div class="meal-status" style="margin-top: 10px; padding: 5px; background-color: #e9ecef; border-radius: 3px;">
                            <span style="font-size: 12px;">Заказано: {{ tomorrow_orders.get('lunch', 0) }} порций</span>
                        </div>
                        {% endif %}
                    </div>
                </td>
                {% endfor %}
            </tr>
        </tbody>
    </table>


</div>

<style>
.btn {
    display: inline-block;
    padding: 10px 20px;
    background-color: #6c757d;
    color: white;
    text-decoration: none;
    border-radius: 4px;
    border: none;
    cursor: pointer;
}
.btn:hover {
    background-color: #5a6268;
}
</style>
{% endblock %}